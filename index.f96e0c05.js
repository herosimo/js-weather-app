!function(){function t(t){return t&&t.__esModule?t.default:t}function e(t,e,n,r,i,o,c){try{var a=t[o](c),s=a.value}catch(t){return void n(t)}a.done?e(s):Promise.resolve(s).then(r,i)}function n(t){return function(){var n=this,r=arguments;return new Promise((function(i,o){var c=t.apply(n,r);function a(t){e(c,i,o,a,s,"next",t)}function s(t){e(c,i,o,a,s,"throw",t)}a(void 0)}))}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a={},s=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,o=Object.create(i.prototype),c=new T(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===g){if("throw"===i)throw o;return O()}for(n.method=i,n.arg=o;;){var c=n.delegate;if(c){var a=E(c,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var s=l(t,e,n);if("normal"===s.type){if(r=n.done?g:d,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=g,n.method="throw",n.arg=s.arg)}}}(t,n,c),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h="suspendedStart",d="suspendedYield",f="executing",g="completed",p={};function y(){}function m(){}function v(){}var _={};s(_,o,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(q([])));x&&x!==n&&r.call(x,o)&&(_=x);var S=v.prototype=y.prototype=Object.create(_);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function n(i,o,c,a){var s=l(t[i],t,o);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,c,a)}),(function(t){n("throw",t,c,a)})):e.resolve(h).then((function(t){u.value=t,c(u)}),(function(t){return n("throw",t,c,a)}))}a(s.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function q(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,c=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}return{next:O}}function O(){return{value:e,done:!0}}return m.prototype=v,s(S,"constructor",v),s(v,"constructor",m),m.displayName=s(v,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,a,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},b(L.prototype),s(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var c=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},b(S),s(S,a,"Generator"),s(S,o,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=q,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],a=c.completion;if("root"===c.tryLoc)return i("end");if(c.tryLoc<=this.prev){var s=r.call(c,"catchLoc"),u=r.call(c,"finallyLoc");if(s&&u){if(this.prev<c.catchLoc)return i(c.catchLoc,!0);if(this.prev<c.finallyLoc)return i(c.finallyLoc)}else if(s){if(this.prev<c.catchLoc)return i(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return i(c.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=t,c.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:q(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(a);try{regeneratorRuntime=s}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}var u=function(){"use strict";function e(i){var o=this;r(this,e),c(this,"changeCity",n(t(a).mark((function e(n){var r,i,o,c,s,u,l,h,d,f,g,p,y,m,v,_,w,x,S,b,L,E,k,P,T,q,O,H,A,I,j;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,this.toggleHideView(this.modal,!0),this.toggleHideView(this.loadingRoot,!1),w=(null===(i=n.target)||void 0===i||null===(o=i.dataset)||void 0===o?void 0:o.lat)||(null===(c=n.coords)||void 0===c?void 0:c.latitude),x=(null===(s=n.target)||void 0===s||null===(u=s.dataset)||void 0===u?void 0:u.lon)||(null===(l=n.coords)||void 0===l?void 0:l.longitude),S=(null===(h=n.target)||void 0===h||null===(d=h.dataset)||void 0===d?void 0:d.city)||(null===(f=n.coords)||void 0===f?void 0:f.city),b=(null===(g=n.target)||void 0===g||null===(p=g.dataset)||void 0===p?void 0:p.state)||(null===(y=n.coords)||void 0===y?void 0:y.state),L=(null===(m=n.target)||void 0===m||null===(v=m.dataset)||void 0===v?void 0:v.country)||(null===(_=n.coords)||void 0===_?void 0:_.country),t.next=11,this.api.callOneCall(w,x);case 11:return E=t.sent,t.next=14,this.api.callAirPollution(w,x);case 14:return k=t.sent,t.next=17,this.api.searchPhoto(b);case 17:P=t.sent,this.container.style.backgroundImage='linear-gradient(rgba(87, 87, 87, 0.5), rgba(87, 87, 87, 0.5)), url("'.concat(P.results[0].urls.regular,'")'),T=new Date(1e3*E.current.dt),this.leftScreenTemp.innerText="".concat(E.current.temp,"°C"),this.leftScreenTitle.innerText=E.current.weather[0].main,this.leftScreenSubtitle.innerText=E.current.weather[0].description,this.leftScreenFl.innerText="Feels like ".concat(E.current.feels_like,"°C"),this.leftScreenDate.innerText="".concat(this.formatTime(T.getHours()),":").concat(this.formatTime(T.getMinutes())," - ").concat(T.toLocaleDateString("en-US",{weekday:"long"}),", ").concat(T.getDate()," ").concat(T.toLocaleDateString("en-US",{month:"long"})," ").concat(T.getFullYear()),this.leftScreenLocation.innerText="".concat(S,", ").concat(b,", ").concat(L),q=E.current.visibility/1e3,O=3600*E.current.wind_speed/1e3,H=k.list[0].main.aqi,A=["Good","Fair","Moderate","Poor","Very Poor"],this.rightScreenAqi.innerText="".concat(H," / ").concat(A[H-1]),this.rightScreenHumidity.innerText="".concat(E.current.humidity,"%"),this.rightScreenPressure.innerText="".concat(E.current.pressure,"hPa"),this.rightScreenUvi.innerText="".concat(E.current.uvi),this.rightScreenClouds.innerText="".concat(E.current.clouds,"%"),this.rightScreenVisibility.innerText="".concat(q.toFixed(1),"km"),this.rightScreenWind.innerText="".concat(O.toFixed(1),"km/h"),I="",E.hourly.slice(0,18).forEach((function(t){var e=new Date(1e3*t.dt);I+="\n      <li>\n        <span>".concat(r.formatTime(e.getHours()),":").concat(r.formatTime(e.getMinutes()),"</span>\n        <span>").concat(t.weather[0].main," / ").concat(t.temp,"°C</span>\n      </li>\n      ")})),this.rightScreenNextHours.innerHTML=I,j="",E.daily.forEach((function(t){var e=new Date(1e3*t.dt);j+="\n      <li>\n        <span>".concat(e.toLocaleDateString("en-US",{weekday:"long"}),", ").concat(e.getDate()," ").concat(e.toLocaleDateString("en-US",{month:"long"})," ").concat(e.getFullYear(),"</span>\n        <span>").concat(t.weather[0].main," / ").concat(t.temp.min,"°C / ").concat(t.temp.max,"°C</span>\n      </li>\n      ")})),this.rightScreenNextDays.innerHTML=j,this.toggleHideView(this.loadingRoot,!0);case 45:case"end":return t.stop()}}),e,this)})).bind(this)).bind(this)),c(this,"onSubmitForm",n(t(a).mark((function e(n){var r,i,o;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),this.toggleHideView(this.searchLoading,!1),this.cityList.firstElementChild.innerHTML="",t.next=5,this.api.callGeocoding("direct",{city:n.target[0].value});case 5:(r=t.sent).length>0?(i=this,o="",r.forEach((function(t){o+='<li data-lon="'.concat(t.lon,'" data-lat="').concat(t.lat,'" data-city="').concat(t.name,'" data-state="').concat(t.state,'" data-country="').concat(t.country,'" class="city">').concat(t.name,", ").concat(t.state,", ").concat(t.country,"</li>")})),this.cityList.firstElementChild.innerHTML=o,document.querySelectorAll(".city").forEach((function(t){return t.addEventListener("click",i.changeCity)})),this.toggleHideView(this.cityList,!1)):alert("No location can be found!"),this.toggleHideView(this.searchLoading,!0);case 8:case"end":return t.stop()}}),e,this)})).bind(this)).bind(this)),this.api=i,this.searchIcon=document.querySelector(".left__top__searchIcon"),this.searchForm=document.querySelector(".search"),this.searchLoading=document.querySelector(".search__loading"),this.modal=document.querySelector(".modal"),this.cityList=document.querySelector(".city-list"),this.loadingRoot=document.querySelector(".loading-root"),this.container=document.querySelector(".container"),this.leftScreenTemp=document.querySelector(".left__bottom__temp span"),this.leftScreenTitle=document.querySelector(".left__bottom__temp h2"),this.leftScreenSubtitle=document.querySelector(".left__bottom__temp p"),this.leftScreenFl=document.querySelector(".left__bottom__fl"),this.leftScreenDate=document.querySelector(".left__bottom__footer__date"),this.leftScreenLocation=document.querySelector(".left__bottom__footer__location"),this.rightScreenAqi=document.querySelector(".right__details__aqi"),this.rightScreenHumidity=document.querySelector(".right__details__humidity"),this.rightScreenPressure=document.querySelector(".right__details__pressure"),this.rightScreenUvi=document.querySelector(".right__details__uvi"),this.rightScreenClouds=document.querySelector(".right__details__clouds"),this.rightScreenVisibility=document.querySelector(".right__details__visibility"),this.rightScreenWind=document.querySelector(".right__details__wind"),this.rightScreenNextHours=document.querySelector(".right__nextHours"),this.rightScreenNextDays=document.querySelector(".right__nextDays"),this.toggleHideView(this.searchLoading,!0),this.toggleHideView(this.cityList,!0),this.toggleHideView(this.modal,!0),this.toggleHideView(this.loadingRoot,!0),window.onload=function(){return o.checkUserLocation()},this.searchForm.addEventListener("submit",this.onSubmitForm),this.searchIcon.addEventListener("click",(function(){return o.toggleHideView(o.modal,!1)})),this.modal.addEventListener("click",(function(t){!t.target.matches(".close")&&t.target.closest(".modal__container")||o.toggleHideView(o.modal,!0)}))}return o(e,[{key:"toggleHideView",value:function(t,e){t.classList.toggle("hide",e)}},{key:"formatTime",value:function(t){return("0"+t).slice(-2)}},{key:"checkUserLocation",value:function(){var e,r=this,i=(e=n(t(a).mark((function e(n){var r,i;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_this.api.callGeocoding("reverse",{lat:n.coords.latitude,lon:n.coords.longitude});case 2:r=t.sent,i={coords:{latitude:n.coords.latitude,longitude:n.coords.longitude,city:r[0].name,state:r[0].state,country:r[0].country}},_this.changeCity(i);case 5:case"end":return t.stop()}}),e)}))),function(){return e.apply(this,arguments)}),o=function(){r.changeCity({coords:{latitude:"51.5073219",longitude:"-0.1276474",city:"London",state:"England",country:"GB"}})};navigator.geolocation?navigator.geolocation.getCurrentPosition(i,o):o()}}]),e}();new u(new(function(){"use strict";function e(){r(this,e),c(this,"OWM_API_KEY","10de9c34a8e3607e1892740e51edccca"),c(this,"OWM_API_URL","http://api.openweathermap.org/"),c(this,"UN_API_KEY","rCmYU-DnVhWNujnJdRl7OHw9R5_OnMbr9whez_VeDqk"),c(this,"UN_API_URL","https://api.unsplash.com/")}return o(e,[{key:"callGeocoding",value:function(e,r){return n(t(a).mark((function n(){var i,o;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="direct"===t.t0?4:"reverse"===t.t0?11:18;break;case 4:return t.next=6,fetch("".concat(this.OWM_API_URL,"/geo/1.0/direct?q=").concat(r.city,"&limit=5&appid=").concat(this.OWM_API_KEY));case 6:return i=t.sent,t.next=9,i.json();case 9:case 16:return o=t.sent,t.abrupt("break",18);case 11:return t.next=13,fetch("".concat(this.OWM_API_URL,"/geo/1.0/reverse?lat=").concat(r.lat,"&lon=").concat(r.lon,"&limit=5&appid=").concat(this.OWM_API_KEY));case 13:return i=t.sent,t.next=16,i.json();case 18:return t.abrupt("return",o);case 19:case"end":return t.stop()}}),n,this)})).bind(this))()}},{key:"callOneCall",value:function(e,r){return n(t(a).mark((function n(){var i,o;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.OWM_API_URL,"data/2.5/onecall?lat=").concat(e,"&lon=").concat(r,"&exclude=alerts,minutely&units=metric&appid=").concat(this.OWM_API_KEY));case 2:return i=t.sent,t.next=5,i.json();case 5:return o=t.sent,t.abrupt("return",o);case 7:case"end":return t.stop()}}),n,this)})).bind(this))()}},{key:"callAirPollution",value:function(e,r){return n(t(a).mark((function n(){var i,o;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.OWM_API_URL,"data/2.5/air_pollution?lat=").concat(e,"&lon=").concat(r,"&appid=").concat(this.OWM_API_KEY));case 2:return i=t.sent,t.next=5,i.json();case 5:return o=t.sent,t.abrupt("return",o);case 7:case"end":return t.stop()}}),n,this)})).bind(this))()}},{key:"searchPhoto",value:function(e){return n(t(a).mark((function n(){var r,i;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.UN_API_URL,"search/photos?query=").concat(e,"&page=1&per_page=1&order_by=relevant&orientation=landscape&client_id=").concat(this.UN_API_KEY));case 2:return r=t.sent,t.next=5,r.json();case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}}),n,this)})).bind(this))()}}]),e}()))}();
//# sourceMappingURL=index.f96e0c05.js.map
